<!DOCTYPE HTML><html lang="zh-CN"><head><meta charset="utf-8"><meta name="keywords" content="V2Ray安装教程：vps购买|服务端及客户端的安装与配置, Nanzet"><meta name="description" content="耐心点 召唤师"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no"><meta name="renderer" content="webkit|ie-stand|ie-comp"><meta name="mobile-web-app-capable" content="yes"><meta name="format-detection" content="telephone=no"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"><title>V2Ray安装教程：vps购买|服务端及客户端的安装与配置 | Nanzet</title><link rel="icon" type="image/png" href="https://cdn.jsdelivr.net/gh/Nanzet/nanzet.github.io/favicon2.png"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Nanzet/nanzet.github.io/libs/awesome/css/all.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Nanzet/nanzet.github.io/libs/materialize/materialize.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Nanzet/nanzet.github.io/libs/aos/aos.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Nanzet/nanzet.github.io/libs/animate/animate.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Nanzet/nanzet.github.io/libs/lightGallery/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Nanzet/nanzet.github.io/css/matery.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Nanzet/nanzet.github.io/css/my.css"><script src="https://cdn.jsdelivr.net/gh/Nanzet/nanzet.github.io/libs/jquery/jquery.min.js"></script><meta name="generator" content="Hexo 4.2.0"><link rel="alternate" href="/atom.xml" title="Nanzet" type="application/atom+xml"><link rel="stylesheet" href="/css/prism-tomorrow.css"></head><body><header class="navbar-fixed"><nav id="headNav" class="bg-color nav-transparent"><div id="navContainer" class="nav-wrapper container"><div class="brand-logo"><a href="/" class="waves-effect waves-light"><img src="https://cdn.jsdelivr.net/gh/Nanzet/nanzet.github.io/medias/logo2.png" class="logo-img" alt="LOGO"> <span class="logo-span">Nanzet</span></a></div><a href="#" data-target="mobile-nav" class="sidenav-trigger button-collapse"><i class="fas fa-bars"></i></a><ul class="right nav-menu"><li class="hide-on-med-and-down nav-item"><a href="/" class="waves-effect waves-light"><i class="fas fa-home" style="zoom:.6"></i> <span>首页</span></a></li><li class="hide-on-med-and-down nav-item"><a href="/tags" class="waves-effect waves-light"><i class="fas fa-tags" style="zoom:.6"></i> <span>标签</span></a></li><li class="hide-on-med-and-down nav-item"><a href="/categories" class="waves-effect waves-light"><i class="fas fa-bookmark" style="zoom:.6"></i> <span>分类</span></a></li><li class="hide-on-med-and-down nav-item"><a href="/archives" class="waves-effect waves-light"><i class="fas fa-archive" style="zoom:.6"></i> <span>归档</span></a></li><li class="hide-on-med-and-down nav-item"><a href="/about" class="waves-effect waves-light"><i class="fas fa-user-circle" style="zoom:.6"></i> <span>关于</span></a></li><li class="hide-on-med-and-down nav-item"><a href="/contact" class="waves-effect waves-light"><i class="fas fa-comments" style="zoom:.6"></i> <span>留言板</span></a></li><li class="hide-on-med-and-down nav-item"><a href="/friends" class="waves-effect waves-light"><i class="fas fa-address-book" style="zoom:.6"></i> <span>友情链接</span></a></li><li class="hide-on-med-and-down nav-item"><a href="/" class="waves-effect waves-light"><i class="fas fa-list" style="zoom:.6"></i> <span>媒体</span><i class="fas fa-chevron-down" aria-hidden="true" style="zoom:.6"></i></a><ul class="sub-nav menus_item_child"><li><a href="/movies"><i class="fas fa-film" style="margin-top:-20px;zoom:.6"></i> <span>电影</span></a></li><li><a href="/books"><i class="fas fa-book" style="margin-top:-20px;zoom:.6"></i> <span>书单</span></a></li><li><a href="/games"><i class="fas fa-gamepad" style="margin-top:-20px;zoom:.6"></i> <span>游戏</span></a></li></ul></li><li><a href="#searchModal" class="modal-trigger waves-effect waves-light"><i id="searchIcon" class="fas fa-search" title="搜索" style="zoom:.85"></i></a></li></ul><div id="mobile-nav" class="side-nav sidenav"><div class="mobile-head bg-color"><img src="https://cdn.jsdelivr.net/gh/Nanzet/nanzet.github.io/medias/logo2.png" class="logo-img circle responsive-img"><div class="logo-name">Nanzet</div><div class="logo-desc">耐心点 召唤师</div></div><ul class="menu-list mobile-menu-list"><li class="m-nav-item"><a href="/" class="waves-effect waves-light"><i class="fa-fw fas fa-home"></i> 首页</a></li><li class="m-nav-item"><a href="/tags" class="waves-effect waves-light"><i class="fa-fw fas fa-tags"></i> 标签</a></li><li class="m-nav-item"><a href="/categories" class="waves-effect waves-light"><i class="fa-fw fas fa-bookmark"></i> 分类</a></li><li class="m-nav-item"><a href="/archives" class="waves-effect waves-light"><i class="fa-fw fas fa-archive"></i> 归档</a></li><li class="m-nav-item"><a href="/about" class="waves-effect waves-light"><i class="fa-fw fas fa-user-circle"></i> 关于</a></li><li class="m-nav-item"><a href="/contact" class="waves-effect waves-light"><i class="fa-fw fas fa-comments"></i> 留言板</a></li><li class="m-nav-item"><a href="/friends" class="waves-effect waves-light"><i class="fa-fw fas fa-address-book"></i> 友情链接</a></li><li class="m-nav-item"><a href="javascript:;"><i class="fa-fw fas fa-list"></i> 媒体<span class="m-icon"><i class="fas fa-chevron-right"></i></span></a><ul><li><a href="/movies" style="margin-left:50px"><i class="fa fas fa-film" style="position:absolute;left:28px"></i> <span>电影</span></a></li><li><a href="/books" style="margin-left:50px"><i class="fa fas fa-book" style="position:absolute;left:28px"></i> <span>书单</span></a></li><li><a href="/games" style="margin-left:50px"><i class="fa fas fa-gamepad" style="position:absolute;left:28px"></i> <span>游戏</span></a></li></ul></li><li><div class="divider"></div></li><li><a href="https://github.com/blinkfox/hexo-theme-matery" class="waves-effect waves-light" target="_blank"><i class="fab fa-github-square fa-fw"></i> Fork Me</a></li></ul></div></div><style>.nav-transparent .github-corner{display:none!important}.github-corner{position:absolute;z-index:10;top:0;right:0;border:0;transform:scale(1.1)}.github-corner svg{color:#0f9d58;fill:#fff;height:64px;width:64px}.github-corner:hover .octo-arm{animation:a .56s ease-in-out}.github-corner .octo-arm{animation:none}@keyframes a{0%,to{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}</style><a href="https://github.com/blinkfox/hexo-theme-matery" class="github-corner tooltipped hide-on-med-and-down" target="_blank" data-tooltip="Fork Me" data-position="left" data-delay="50"><svg viewBox="0 0 250 250" aria-hidden="true"><path d="M0 0 115 115 130 115 142 142 250 250 250 0Z"></path><path d="M128.3 109C113.8 99.7 119 89.6 119 89.6 122 82.7 120.5 78.6 120.5 78.6 119.2 72 123.4 76.3 123.4 76.3 127.3 80.9 125.5 87.3 125.5 87.3 122.9 97.6 130.6 101.9 134.4 103.2" fill="currentColor" style="transform-origin:130px 106px" class="octo-arm"></path><path d="M115 115C114.9 115.1 118.7 116.5 119.8 115.4L133.7 101.6C136.9 99.2 139.9 98.4 142.2 98.6 133.8 88 127.5 74.4 143.8 58 148.5 53.4 154 51.2 159.7 51 160.3 49.4 163.2 43.6 171.4 40.1 171.4 40.1 176.1 42.5 178.8 56.2 183.1 58.6 187.2 61.8 190.9 65.4 194.5 69 197.7 73.2 200.1 77.6 213.8 80.2 216.3 84.9 216.3 84.9 212.7 93.1 206.9 96 205.4 96.6 205.1 102.4 203 107.8 198.3 112.5 181.9 128.9 168.3 122.5 157.7 114.1 157.9 116.9 156.7 120.9 152.7 124.9L141 136.5C139.8 137.7 141.6 141.9 141.8 141.8Z" fill="currentColor" class="octo-body"></path></svg></a></nav></header><div class="bg-cover pd-header post-cover" style="background-image:url(https://cdn.jsdelivr.net/gh/Nanzet/nanzet-imgs/images/2020070404.jpg)"><div class="container" style="right:0;left:0"><div class="row"><div class="col s12 m12 l12"><div class="brand"><h1 class="description center-align post-title">V2Ray安装教程：vps购买|服务端及客户端的安装与配置</h1></div></div></div></div></div><main class="post-container content"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Nanzet/nanzet.github.io/libs/tocbot/tocbot.css"><style>#articleContent h1::before,#articleContent h2::before,#articleContent h3::before,#articleContent h4::before,#articleContent h5::before,#articleContent h6::before{display:block;content:" ";height:100px;margin-top:-100px;visibility:hidden}#articleContent :focus{outline:0}.toc-fixed{position:fixed;top:64px}.toc-widget{width:345px;padding-left:20px}.toc-widget .toc-title{margin:35px 0 15px 0;padding-left:17px;font-size:1.5rem;font-weight:700;line-height:1.5rem}.toc-widget ol{padding:0;list-style:none}#toc-content{height:calc(100vh - 250px);overflow:auto}#toc-content ol{padding-left:10px}#toc-content ol li{padding-left:10px}#toc-content .toc-link:hover{color:#42b983;font-weight:700;text-decoration:underline}#toc-content .toc-link::before{background-color:transparent;max-height:25px;position:absolute;right:23.5vw;display:block}#toc-content .is-active-link{color:#42b983}#floating-toc-btn{position:fixed;right:15px;bottom:76px;padding-top:15px;margin-bottom:0;z-index:998}#floating-toc-btn .btn-floating{width:48px;height:48px}#floating-toc-btn .btn-floating i{line-height:48px;font-size:1.4rem}</style><div class="row"><div id="main-content" class="col s12 m12 l9"><div id="artDetail"><div class="card"><div class="card-content article-info"><div class="row tag-cate"><div class="col s7"><div class="article-tag"><a href="/tags/v2ray/"><span class="chip bg-color">v2ray</span></a></div></div><div class="col s5 right-align"><div class="post-cate"><i class="fas fa-bookmark fa-fw icon-category"></i> <a href="/categories/%E6%8A%80%E6%9C%AF/" class="post-category">技术</a></div></div></div><div class="post-info"><div class="post-date info-break-policy"><i class="far fa-calendar-minus fa-fw"></i> 发布日期:&nbsp;&nbsp; 2020-07-04</div><div class="post-date info-break-policy"><i class="far fa-calendar-check fa-fw"></i> 更新日期:&nbsp;&nbsp; 2020-07-04</div><div class="info-break-policy"><i class="far fa-file-word fa-fw"></i> 文章字数:&nbsp;&nbsp; 1.1k</div><div class="info-break-policy"><i class="far fa-clock fa-fw"></i> 阅读时长:&nbsp;&nbsp; 4 分</div><div id="busuanzi_container_page_pv" class="info-break-policy"><i class="far fa-eye fa-fw"></i> 阅读次数:&nbsp;&nbsp;<span id="busuanzi_value_page_pv"></span></div></div></div><hr class="clearfix"><div class="card-content article-card-content"><div id="articleContent"><blockquote><p><strong>【声明：仅供学习交流、查阅资料使用，后果自负】</strong></p></blockquote><h5 id="一、购买VPS（已弃用virmach不稳定，购买了Hostus-16-年的套餐，可以修改系统为ubuntu下面的安装v2ray等步骤一样）"><a href="#一、购买VPS（已弃用virmach不稳定，购买了Hostus-16-年的套餐，可以修改系统为ubuntu下面的安装v2ray等步骤一样）" class="headerlink" title="一、购买VPS（已弃用virmach不稳定，购买了Hostus $16/年的套餐，可以修改系统为ubuntu下面的安装v2ray等步骤一样）"></a>一、购买VPS（已弃用virmach不稳定，购买了Hostus $16/年的套餐，可以修改系统为ubuntu下面的安装v2ray等步骤一样）</h5><h6 id="1-1-购买说明"><a href="#1-1-购买说明" class="headerlink" title="1.1 购买说明"></a>1.1 购买说明</h6><p> 我购买的是：<a href="https://billing.virmach.com/" target="_blank" rel="noopener">virmach</a>–&gt;register–&gt;<a href="https://billing.virmach.com/cart.php?gid=18" target="_blank" rel="noopener">KVM &amp; SSD Windows VPS</a>（季付，可搜索virmach优惠码进行兑换；注意操作系统建议选择ubuntu 16.04.6，初始选择的centos 6.5安装v2ray失败）</p><p><img src="https://cdn.jsdelivr.net/gh/Nanzet/nanzet-imgs/images/2020062401.jpg" alt=""></p><p> 上述vps ping的时候不是特别稳定，不过配置v2ray后，速度还可以，能满足查阅资料的需求（这款流量用不完，可以按照自己需求选购套餐）；其他vps推荐：<a href="http://www.hostusvps.com/" target="_blank" rel="noopener">HostUs</a>购买以下套餐即可：（已购买速度快很多、更稳定）</p><p><img src="https://cdn.jsdelivr.net/gh/Nanzet/nanzet-imgs/images/2020062402.jpg" alt=""></p><h5 id="二、ubuntu-16-04-6-安装服务端v2ray流程"><a href="#二、ubuntu-16-04-6-安装服务端v2ray流程" class="headerlink" title="二、ubuntu 16.04.6 安装服务端v2ray流程"></a>二、ubuntu 16.04.6 安装服务端v2ray流程</h5><blockquote><p>注：<br> 使用xshell可远程连接vps，根据hostus提供的root账户密码、IP进行登录连接；初始登录可使用passwd命令更改root账户密码，以后使用该密码即可；若忘记自己设置的密码，在hostus购买的的vps管理界面更改root密码即可。</p></blockquote><h6 id="2-1-更新apt"><a href="#2-1-更新apt" class="headerlink" title="2.1 更新apt"></a>2.1 更新apt</h6><pre><code>sudo apt update &amp;&amp; sudo apt -y upgrade</code></pre><h6 id="2-2-查看系统时间并修改时区"><a href="#2-2-查看系统时间并修改时区" class="headerlink" title="2.2 查看系统时间并修改时区"></a>2.2 查看系统时间并修改时区</h6><pre><code>date -R
timedatectl set-timezone Asia/Shanghai    
# 若提示'Failed to create bus connection: No such file or directory'，先执行apt-get install dbus</code></pre><p><img src="https://cdn.jsdelivr.net/gh/Nanzet/nanzet-imgs/images/2020062403.jpg" alt=""></p><h6 id="2-3-安装upzip"><a href="#2-3-安装upzip" class="headerlink" title="2.3 安装upzip"></a>2.3 安装upzip</h6><pre><code>sudo apt install unzip</code></pre><h6 id="2-4-下载、安装官方维护脚本"><a href="#2-4-下载、安装官方维护脚本" class="headerlink" title="2.4 下载、安装官方维护脚本"></a>2.4 下载、安装官方维护脚本</h6><pre><code>wget https://install.direct/go.sh &amp;&amp; sudo bash go.sh</code></pre><img src="https://cdn.jsdelivr.net/gh/Nanzet/nanzet-imgs/images/2020063002.jpg"><p> 上图的端口号和uuid是随机生成的，可在/etc/v2ray/config.json配置文件中进行更改。</p><p> 生成正确格式的uuid可以参考： <a href="https://www.uuidgenerator.net/，linux也可以使用命令" target="_blank" rel="noopener">https://www.uuidgenerator.net/，linux也可以使用命令</a> cat /proc/sys/kernel/random/uuid 生成。</p><p><img src="https://cdn.jsdelivr.net/gh/Nanzet/nanzet-imgs/images/2020062801.jpg" alt=""></p><p> 查看 or 编辑/etc/v2ray/config.json：</p><pre><code>cat or vim /etc/v2ray/config.json</code></pre><h6><a href="#" class="headerlink"></a><img src="https://cdn.jsdelivr.net/gh/Nanzet/nanzet-imgs/images/2020062802.jpg" alt=""></h6><h6 id="2-5-设置开机启动-amp-启动服务"><a href="#2-5-设置开机启动-amp-启动服务" class="headerlink" title="2.5 设置开机启动 &amp; 启动服务"></a>2.5 设置开机启动 &amp; 启动服务</h6><pre><code>sudo systemctl enable v2ray &amp;&amp; sudo systemctl start/restart v2ray</code></pre><p>注：systemctl start/restart/stop/status v2ray</p><h6 id="2-6-设置防火墙：-ubuntu防火墙设置"><a href="#2-6-设置防火墙：-ubuntu防火墙设置" class="headerlink" title="2.6 设置防火墙：(ubuntu防火墙设置)"></a>2.6 设置防火墙：(<a href="https://www.jianshu.com/p/eccb913ac58d" target="_blank" rel="noopener">ubuntu防火墙设置</a>)</h6><pre><code># 开启防火墙
sudo ufw enable
# 打开指定端口
sudo ufw allow 15421/tcp

# 注：要通过本机的xshell连接上远程的vps则需要开放vps的22端口
sudo ufw allow 22

# 若提示command not found，执行apt-get install ufw -y</code></pre><h6 id="2-7-升级更新，重新执行安装，不会修改原配置"><a href="#2-7-升级更新，重新执行安装，不会修改原配置" class="headerlink" title="2.7 升级更新，重新执行安装，不会修改原配置"></a>2.7 升级更新，重新执行安装，不会修改原配置</h6><pre><code>$ sudo bash go.sh</code></pre><h6 id="2-8-解决高延迟问题"><a href="#2-8-解决高延迟问题" class="headerlink" title="2.8 解决高延迟问题"></a>2.8 解决高延迟问题</h6><p>安装BBR：</p><pre><code>wget -N --no-check-certificate "https://raw.githubusercontent.com/chiakge/Linux-NetSpeed/master/tcp.sh" &amp;&amp; chmod +x tcp.sh &amp;&amp; ./tcp.sh</code></pre><p> 先选择安装BBR/BBR魔改版内核内核，安装完成后，在执行./tcp.sh按需要选择加速，我选择的是魔改版加速。</p><p> 其他v2ray配置请参考官方教程有详细说明。</p><h6 id="2-9-TLS配置可能遇到的问题及解决方法总结"><a href="#2-9-TLS配置可能遇到的问题及解决方法总结" class="headerlink" title="2.9 TLS配置可能遇到的问题及解决方法总结"></a>2.9 <a href="https://guide.v2fly.org/advanced/tls.html" target="_blank" rel="noopener">TLS配置</a>可能遇到的问题及解决方法总结</h6><p>（1）添加域名解析A记录参考：</p><p><img src="https://cdn.jsdelivr.net/gh/Nanzet/nanzet-imgs/images/2020070405.jpg" alt=""></p><p>（2）解决使用’~/.acme.sh/acme.sh –issue -d mydomain.me –standalone –keylength ec-256 –force’命令生成证书的80端口被占用问题：</p><pre class="language-python"><code class="language-python"><span class="token comment" spellcheck="true"># 查看80端口占用情况</span>
lsof <span class="token operator">-</span>i<span class="token punctuation">:</span><span class="token number">80</span>

<span class="token comment" spellcheck="true"># 若要关闭使用这个端口的程序，使用kill + 对应的pid</span>
kill <span class="token operator">-</span><span class="token number">9</span> PID号</code></pre><blockquote><p>参考：</p><p>a. <a href="https://guide.v2fly.org/" target="_blank" rel="noopener">新 V2Ray 白话文指南</a></p><p>b. <a href="https://yuan.ga/v2ray-complete-tutorial/" target="_blank" rel="noopener">v2ray完全使用教程</a></p><p>c. <a href="https://tophat.top/posts/98b102d8.html" target="_blank" rel="noopener">caddy v2 安装教程</a>（WebSocket + TLS + Web尝试失败，有空再试，目前参照官方教程的tls配置成功，且速度较快）</p></blockquote><h5 id="三、客户端安装"><a href="#三、客户端安装" class="headerlink" title="三、客户端安装"></a>三、客户端安装</h5><blockquote><p>客户端如PC建议在chrome或firefox浏览器下载插件Proxy SwitchyOmega搭配使用。</p></blockquote><p><strong>客户端：</strong></p><p><a href="https://github.com/v2ray/v2ray-core/releases" target="_blank" rel="noopener"><strong>Windows</strong></a></p><p><a href="https://github.com/2dust/v2rayN/releases" target="_blank" rel="noopener"><strong>图形化客户端</strong></a></p><p><a href="https://github.com/v2ray/v2ray-core/releases" target="_blank" rel="noopener"><strong>MacOS</strong></a></p><p><a href="https://github.com/v2ray/v2ray-core/releases" target="_blank" rel="noopener"><strong>Linux</strong></a></p><p><strong>Android:</strong></p><p>V2RayNG: <a href="https://github.com/2dust/v2rayNG/releases" target="_blank" rel="noopener">Github</a> or <a href="https://play.google.com/store/apps/details?id=com.v2ray.ang" target="_blank" rel="noopener">Play Store</a></p><p>BifrostV: or <a href="https://play.google.com/store/apps/details?id=com.github.dawndiy.bifrostv" target="_blank" rel="noopener">Play Store</a></p><p><strong>iOS:（支持以下软件，链接可能过时，请在苹果商店下载）</strong></p><p><a href="https://itunes.apple.com/tw/app/shadowrocket/id932747118" target="_blank" rel="noopener">ShadowRocket</a></p><p><a href="http://itunes.apple.com/tw/app/kitsunebi-proxy-utility/id1446584073" target="_blank" rel="noopener">Kitsunebi - Proxy Utility</a></p><p><a href="http://itunes.apple.com/tw/app/kitsunebi-lite/id1387913765" target="_blank" rel="noopener">Kitsunebi Lite</a></p><p><a href="https://itunes.apple.com/tw/app/pepi/id1283082051" target="_blank" rel="noopener">Pepi</a></p><p><a href="https://itunes.apple.com/tw/app/i2ray/id1445270056" target="_blank" rel="noopener">i2Ray</a></p><p><a href="https://itunes.apple.com/tw/app/quantumult/id1252015438" target="_blank" rel="noopener">Quantumult</a></p><p><strong>附：</strong></p><p><a href="https://docs.qq.com/doc/DYlVOcWJtYlFPSFdN" target="_blank" rel="noopener"><strong>400+苹果软件分享</strong></a></p><p><strong>解决关于chrome浏览器插件离线安装和设置SwitchyOmega的问题：</strong></p><p>（1）<a href="https://crxdl.com/" target="_blank" rel="noopener">下载Chrome扩展插件Crx离线安装包</a>–搜索”SwitchyOmega”<br>（2）<a href="https://www.cccitu.com/3391.html" target="_blank" rel="noopener">谷歌Chrome浏览器安装扩展插件</a><br>（3）SwitchyOmega配置<a href="https://www.cccitu.com/2655.html" target="_blank" rel="noopener">Chrome浏览器SOCKS代理服务器设置教程</a><br>（4）规则列表：（<a href="https://blog.csdn.net/qq_38879305/article/details/106619860" target="_blank" rel="noopener">规则列表刷新不了</a>、仍然恢复不了：<a href="https://blog.csdn.net/qq_36561697/article/details/88350512?utm_medium=distribute.pc_relevant.none-task-blog-baidujs-1" target="_blank" rel="noopener">戳我</a>）</p><pre><code>https://raw.githubusercontent.com/gfwlist/gfwlist/master/gfwlist.txt</code></pre><p><img src="https://cdn.jsdelivr.net/gh/Nanzet/nanzet-imgs/images/2020062803.jpg" alt=""></p><p>（5）google</p><p><img src="https://cdn.jsdelivr.net/gh/Nanzet/nanzet-imgs/images/2020062804.jpg" alt=""></p><script>document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });</script></div><hr><div class="reprint" id="reprint-statement"><div class="reprint__author"><span class="reprint-meta" style="font-weight:700"><i class="fas fa-user">文章作者:</i></span> <span class="reprint-info"><a href="/about" rel="external nofollow noreferrer">Nanzet</a></span></div><div class="reprint__type"><span class="reprint-meta" style="font-weight:700"><i class="fas fa-link">文章链接:</i></span> <span class="reprint-info"><a href="https://nanzet.cn/2b11.html">https://nanzet.cn/2b11.html</a></span></div><div class="reprint__notice"><span class="reprint-meta" style="font-weight:700"><i class="fas fa-copyright">版权声明:</i></span> <span class="reprint-info">本博客所有文章除特別声明外，均采用 <a href="https://creativecommons.org/licenses/by/4.0/deed.zh" rel="external nofollow noreferrer" target="_blank">CC BY 4.0</a> 许可协议。转载请注明来源 <a href="/about" target="_blank">Nanzet</a> !</span></div></div><script async defer>document.addEventListener("copy", function (e) {
        let toastHTML = '<span>复制成功，请遵循本文的转载规则</span><button class="btn-flat toast-action" onclick="navToReprintStatement()" style="font-size: smaller">查看</a>';
        M.toast({html: toastHTML})
      });

      function navToReprintStatement() {
        $("html, body").animate({scrollTop: $("#reprint-statement").offset().top - 80}, 800);
      }</script><div class="tag_share" style="display:block"><div class="post-meta__tag-list" style="display:inline-block"><div class="article-tag"><a href="/tags/v2ray/"><span class="chip bg-color">v2ray</span></a></div></div><div class="post_share" style="zoom:80%;width:fit-content;display:inline-block;float:right;margin:-.15rem 0"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Nanzet/nanzet.github.io/libs/share/css/share.min.css"><div id="article-share"><div class="social-share" data-sites="qq,wechat,qzone,twitter,facebook,google,weibo,douban,linkedin" data-wechat-qrcode-helper="<p>微信扫一扫即可分享！</p>"></div><script src="https://cdn.jsdelivr.net/gh/Nanzet/nanzet.github.io/libs/share/js/social-share.min.js"></script></div></div></div><style>#reward{margin:40px 0;text-align:center}#reward .reward-link{font-size:1.4rem;line-height:38px}#reward .btn-floating:hover{box-shadow:0 6px 12px rgba(0,0,0,.2),0 5px 15px rgba(0,0,0,.2)}#rewardModal{width:320px;height:350px}#rewardModal .reward-title{margin:15px auto;padding-bottom:5px}#rewardModal .modal-content{padding:10px}#rewardModal .close{position:absolute;right:15px;top:15px;color:rgba(0,0,0,.5);font-size:1.3rem;line-height:20px;cursor:pointer}#rewardModal .close:hover{color:#ef5350;transform:scale(1.3);-moz-transform:scale(1.3);-webkit-transform:scale(1.3);-o-transform:scale(1.3)}#rewardModal .reward-tabs{margin:0 auto;width:210px}.reward-tabs .tabs{height:38px;margin:10px auto;padding-left:0}.reward-content ul{padding-left:0!important}.reward-tabs .tabs .tab{height:38px;line-height:38px}.reward-tabs .tab a{color:#fff;background-color:#ccc}.reward-tabs .tab a:hover{background-color:#ccc;color:#fff}.reward-tabs .wechat-tab .active{color:#fff!important;background-color:#22ab38!important}.reward-tabs .alipay-tab .active{color:#fff!important;background-color:#019fe8!important}.reward-tabs .reward-img{width:210px;height:210px}</style><div id="reward"><a href="#rewardModal" class="reward-link modal-trigger btn-floating btn-medium waves-effect waves-light red">赏</a><div id="rewardModal" class="modal"><div class="modal-content"><a class="close modal-close"><i class="fas fa-times"></i></a><h4 class="reward-title">你的赏识是我前进的动力</h4><div class="reward-content"><div class="reward-tabs"><ul class="tabs row"><li class="tab col s6 alipay-tab waves-effect waves-light"><a href="#alipay">支付宝</a></li><li class="tab col s6 wechat-tab waves-effect waves-light"><a href="#wechat">微 信</a></li></ul><div id="alipay"><img src="https://cdn.jsdelivr.net/gh/Nanzet/nanzet.github.io/medias/reward/alipay.jpg" class="reward-img" alt="支付宝打赏二维码"></div><div id="wechat"><img src="https://cdn.jsdelivr.net/gh/Nanzet/nanzet.github.io/medias/reward/wechat.png" class="reward-img" alt="微信打赏二维码"></div></div></div></div></div></div><script>$(function(){$(".tabs").tabs()})</script></div></div><style>.valine-card{margin:1.5rem auto}.valine-card .card-content{padding:20px 20px 5px 20px}#vcomments textarea{box-sizing:border-box;background:url(/medias/comment_bg.png) 100% 100% no-repeat}#vcomments p{margin:2px 2px 10px;font-size:1.05rem;line-height:1.78rem}#vcomments blockquote p{text-indent:.2rem}#vcomments a{padding:0 2px;color:#4cbf30;font-weight:500;text-decoration:none}#vcomments img{max-width:100%;height:auto;cursor:pointer}#vcomments ol li{list-style-type:decimal}#vcomments ol,ul{display:block;padding-left:2em;word-spacing:.05rem}#vcomments ul li,ol li{display:list-item;line-height:1.8rem;font-size:1rem}#vcomments ul li{list-style-type:disc}#vcomments ul ul li{list-style-type:circle}#vcomments table,td,th{padding:12px 13px;border:1px solid #dfe2e5}#vcomments table,td,th{border:0}table tr:nth-child(2n),thead{background-color:#fafafa}#vcomments table th{background-color:#f2f2f2;min-width:80px}#vcomments table td{min-width:80px}#vcomments h1{font-size:1.85rem;font-weight:700;line-height:2.2rem}#vcomments h2{font-size:1.65rem;font-weight:700;line-height:1.9rem}#vcomments h3{font-size:1.45rem;font-weight:700;line-height:1.7rem}#vcomments h4{font-size:1.25rem;font-weight:700;line-height:1.5rem}#vcomments h5{font-size:1.1rem;font-weight:700;line-height:1.4rem}#vcomments h6{font-size:1rem;line-height:1.3rem}#vcomments p{font-size:1rem;line-height:1.5rem}#vcomments hr{margin:12px 0;border:0;border-top:1px solid #ccc}#vcomments blockquote{margin:15px 0;border-left:5px solid #42b983;padding:1rem .8rem .3rem .8rem;color:#666;background-color:rgba(66,185,131,.1)}#vcomments pre{font-family:monospace,monospace;padding:1.2em;margin:.5em 0;background:#272822;overflow:auto;border-radius:.3em;tab-size:4}#vcomments code{font-family:monospace,monospace;padding:1px 3px;font-size:.92rem;color:#e96900;background-color:#f8f8f8;border-radius:2px}#vcomments pre code{font-family:monospace,monospace;padding:0;color:#e8eaf6;background-color:#272822}#vcomments pre[class*=language-]{padding:1.2em;margin:.5em 0}#vcomments code[class*=language-],pre[class*=language-]{color:#e8eaf6}#vcomments [type=checkbox]:not(:checked),[type=checkbox]:checked{position:inherit;margin-left:-1.3rem;margin-right:.4rem;margin-top:-1px;vertical-align:middle;left:unset;visibility:visible}#vcomments b,strong{font-weight:700}#vcomments dfn{font-style:italic}#vcomments small{font-size:85%}#vcomments cite{font-style:normal}#vcomments mark{background-color:#fcf8e3;padding:.2em}#vcomments table,td,th{padding:12px 13px;border:1px solid #dfe2e5}table tr:nth-child(2n),thead{background-color:#fafafa}#vcomments table th{background-color:#f2f2f2;min-width:80px}#vcomments table td{min-width:80px}#vcomments [type=checkbox]:not(:checked),[type=checkbox]:checked{position:inherit;margin-left:-1.3rem;margin-right:.4rem;margin-top:-1px;vertical-align:middle;left:unset;visibility:visible}</style><div class="card valine-card" data-aos="fade-up"><div class="comment_headling" style="font-size:20px;font-weight:700;position:relative;padding-left:20px;top:15px;padding-bottom:5px"><i class="fas fa-comments fa-fw" aria-hidden="true"></i> <span>评论</span></div><div id="vcomments" class="card-content" style="display:grid"></div></div><script src="https://cdn.jsdelivr.net/gh/Nanzet/nanzet.github.io/libs/valine/av-min.js"></script><script src="https://cdn.jsdelivr.net/gh/Nanzet/nanzet.github.io/libs/valine/Valine.min.js"></script><script>new Valine({el:"#vcomments",appId:"5do1ClGYMrrQeRb42Lp6lb0u-gzGzoHsz",appKey:"i8xDeG3qrrQYLJIwa7mmTMdo",notify:!1,verify:!1,visitor:!0,avatar:"wavatar",pageSize:"10",lang:"zh-cn",placeholder:"ヾﾉ≧∀≦)o来啊，快活啊!"})</script><article id="prenext-posts" class="prev-next articles"><div class="row article-row"><div class="article col s12 m6" data-aos="fade-up"><div class="article-badge left-badge text-color"><i class="fas fa-chevron-left"></i> &nbsp;上一篇</div><div class="card"><a href="/bbad.html"><div class="card-image"><img src="https://cdn.jsdelivr.net/gh/Nanzet/nanzet-imgs/images/2020070403.jpg" class="responsive-img" alt="Python 利用匿名函数和reduce()方法对嵌套列表去重"> <span class="card-title">Python 利用匿名函数和reduce()方法对嵌套列表去重</span></div></a><div class="card-content article-content"><div class="summary block-with-text">python嵌套列表去重</div><div class="publish-info"><span class="publish-date"><i class="far fa-clock fa-fw icon-date"></i> 2020-07-04</span><span class="publish-author"><i class="fas fa-bookmark fa-fw icon-category"></i> <a href="/categories/%E6%8A%80%E6%9C%AF/" class="post-category">技术</a></span></div></div><div class="card-action article-tags"><a href="/tags/python/"><span class="chip bg-color">python</span></a></div></div></div><div class="article col s12 m6" data-aos="fade-up"><div class="article-badge right-badge text-color">下一篇&nbsp;<i class="fas fa-chevron-right"></i></div><div class="card"><a href="/58d9.html"><div class="card-image"><img src="https://cdn.jsdelivr.net/gh/Nanzet/nanzet-imgs/images/2020061201.jpg" class="responsive-img" alt="理解美团点评分布式ID生成系统--Leaf"> <span class="card-title">理解美团点评分布式ID生成系统--Leaf</span></div></a><div class="card-content article-content"><div class="summary block-with-text">数据库设计--分布式唯一id</div><div class="publish-info"><span class="publish-date"><i class="far fa-clock fa-fw icon-date"></i> 2020-06-11</span><span class="publish-author"><i class="fas fa-bookmark fa-fw icon-category"></i> <a href="/categories/%E6%8A%80%E6%9C%AF/" class="post-category">技术</a></span></div></div><div class="card-action article-tags"><a href="/tags/%E5%88%86%E5%B8%83%E5%BC%8F%E5%94%AF%E4%B8%80ID/"><span class="chip bg-color">分布式唯一ID</span></a></div></div></div></div></article></div><script>$("#articleContent").on("copy",function(e){if(void 0!==window.getSelection){var n=window.getSelection();if(!((""+n).length<Number.parseInt("120"))){var t=document.getElementsByTagName("body")[0],o=document.createElement("div");o.style.position="absolute",o.style.left="-99999px",t.appendChild(o),o.appendChild(n.getRangeAt(0).cloneContents()),"PRE"===n.getRangeAt(0).commonAncestorContainer.nodeName&&(o.innerHTML="<pre>"+o.innerHTML+"</pre>");var i=document.location.href;o.innerHTML+='<br />来源: Nanzet<br />文章作者: nanzet<br />文章链接: <a href="'+i+'">'+i+"</a><br />本文章著作权归作者所有，任何形式的转载都请注明出处。",n.selectAllChildren(o),window.setTimeout(function(){t.removeChild(o)},200)}}})</script><script src="https://cdn.jsdelivr.net/gh/Nanzet/nanzet.github.io/libs/codeBlock/codeBlockFuction.js"></script><script src="https://cdn.jsdelivr.net/gh/Nanzet/nanzet.github.io/libs/codeBlock/codeLang.js"></script><script src="https://cdn.jsdelivr.net/gh/Nanzet/nanzet.github.io/libs/codeBlock/codeCopy.js"></script><script src="https://cdn.jsdelivr.net/gh/Nanzet/nanzet.github.io/libs/codeBlock/codeShrink.js"></script><style>code[class*=language-],pre[class*=language-]{white-space:pre!important}</style></div><div id="toc-aside" class="expanded col l3 hide-on-med-and-down"><div class="toc-widget"><div class="toc-title"><i class="far fa-list-alt"></i>&nbsp;&nbsp;目录</div><div id="toc-content"></div></div></div></div><div id="floating-toc-btn" class="hide-on-med-and-down"><a class="btn-floating btn-large bg-color"><i class="fas fa-list-ul"></i></a></div><script src="https://cdn.jsdelivr.net/gh/Nanzet/nanzet.github.io/libs/tocbot/tocbot.min.js"></script><script>$(function () {
        tocbot.init({
            tocSelector: '#toc-content',
            contentSelector: '#articleContent',
            headingsOffset: -($(window).height() * 0.4 - 45),
            collapseDepth: Number('0'),
            headingSelector: 'h2, h3, h4'
        });

        // modify the toc link href to support Chinese.
        let i = 0;
        let tocHeading = 'toc-heading-';
        $('#toc-content a').each(function () {
            $(this).attr('href', '#' + tocHeading + (++i));
        });

        // modify the heading title id to support Chinese.
        i = 0;
        $('#articleContent').children('h2, h3, h4').each(function () {
            $(this).attr('id', tocHeading + (++i));
        });

        // Set scroll toc fixed.
        let tocHeight = parseInt($(window).height() * 0.4 - 64);
        let $tocWidget = $('.toc-widget');
        $(window).scroll(function () {
            let scroll = $(window).scrollTop();
            /* add post toc fixed. */
            if (scroll > tocHeight) {
                $tocWidget.addClass('toc-fixed');
            } else {
                $tocWidget.removeClass('toc-fixed');
            }
        });

        
        /* 修复文章卡片 div 的宽度. */
        let fixPostCardWidth = function (srcId, targetId) {
            let srcDiv = $('#' + srcId);
            if (srcDiv.length === 0) {
                return;
            }

            let w = srcDiv.width();
            if (w >= 450) {
                w = w + 21;
            } else if (w >= 350 && w < 450) {
                w = w + 18;
            } else if (w >= 300 && w < 350) {
                w = w + 16;
            } else {
                w = w + 14;
            }
            $('#' + targetId).width(w);
        };

        // 切换TOC目录展开收缩的相关操作.
        const expandedClass = 'expanded';
        let $tocAside = $('#toc-aside');
        let $mainContent = $('#main-content');
        $('#floating-toc-btn .btn-floating').click(function () {
            if ($tocAside.hasClass(expandedClass)) {
                $tocAside.removeClass(expandedClass).hide();
                $mainContent.removeClass('l9');
            } else {
                $tocAside.addClass(expandedClass).show();
                $mainContent.addClass('l9');
            }
            fixPostCardWidth('artDetail', 'prenext-posts');
        });
        
    });</script></main><script src="https://cdn.bootcss.com/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><script>MathJax.Hub.Config({tex2jax:{inlineMath:[["$","$"],["(",")"]]}})</script><footer class="page-footer bg-color"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Nanzet/nanzet.github.io/libs/aplayer/APlayer.min.css"><style>.aplayer .aplayer-lrc p{font-size:12px;font-weight:700;line-height:16px!important}.aplayer .aplayer-lrc p.aplayer-lrc-current{font-size:15px;color:#42b983}</style><div><div class="row"><meting-js class="col l8 offset-l2 m10 offset-m1 s12" server="netease" type="playlist" id="434914348" fixed="true" autoplay theme="#42b983" loop order="random" preload="auto" volume="0.7" list-folded="true"></meting-js></div></div><script src="https://cdn.jsdelivr.net/gh/Nanzet/nanzet.github.io/libs/aplayer/APlayer.min.js"></script><script src="https://cdn.jsdelivr.net/npm/meting@2/dist/Meting.min.js"></script><div class="container row center-align" style="margin-bottom:15px!important"><div class="col s12 m8 l8 copy-right">Copyright&nbsp;&copy; <span id="year">2020</span> <a href="/about" target="_blank">nanzet</a> |&nbsp;Powered by&nbsp;<a href="https://hexo.io/" target="_blank">Hexo</a> |&nbsp;Theme&nbsp;<a href="https://github.com/blinkfox/hexo-theme-matery" target="_blank">Matery</a><br>&nbsp;<i class="fas fa-chart-area"></i>&nbsp;站点总字数:&nbsp;<span class="white-color">5.2k</span>&nbsp;字 <span id="busuanzi_container_site_pv">|&nbsp;<i class="far fa-eye"></i>&nbsp;总访问量:&nbsp;<span id="busuanzi_value_site_pv" class="white-color"></span>&nbsp;次</span> <span id="busuanzi_container_site_uv">|&nbsp;<i class="fas fa-users"></i>&nbsp;总访问人数:&nbsp;<span id="busuanzi_value_site_uv" class="white-color"></span>&nbsp;人</span><br><span id="sitetime">载入运行时间...</span><script>function siteTime(){var e=36e5,t=24*e,n=new Date,o="2020",r=n.getFullYear(),a=n.getMonth()+1,i=n.getDate(),l=n.getHours(),m=n.getMinutes(),M=n.getSeconds(),g=Date.UTC(o,"2","10","0","0","0"),d=Date.UTC(r,a,i,l,m,M)-g,s=Math.floor(d/31536e6),u=Math.floor(d/t-365*s),T=Math.floor((d-(365*s+u)*t)/e),c=Math.floor((d-(365*s+u)*t-T*e)/6e4),f=Math.floor((d-(365*s+u)*t-T*e-6e4*c)/1e3);o==r?(document.getElementById("year").innerHTML=r,document.getElementById("sitetime").innerHTML="本站已安全运行 "+u+" 天 "+T+" 小时 "+c+" 分钟 "+f+" 秒"):(document.getElementById("year").innerHTML=o+" - "+r,document.getElementById("sitetime").innerHTML="本站已安全运行 "+s+" 年 "+u+" 天 "+T+" 小时 "+c+" 分钟 "+f+" 秒")}setInterval(siteTime,1e3)</script><br></div><div class="col s12 m4 l4 social-link social-statis"><a href="https://github.com/nanzet" class="tooltipped" target="_blank" data-tooltip="访问我的GitHub" data-position="top" data-delay="50"><i class="fab fa-github"></i></a><a href="mailto:1410060198@qq.com" class="tooltipped" target="_blank" data-tooltip="邮件联系我" data-position="top" data-delay="50"><i class="fas fa-envelope-open"></i></a><a href="tencent://AddContact/?fromId=50&fromSubId=1&subcmd=all&uin=1410060198" class="tooltipped" target="_blank" data-tooltip="QQ联系我: 1410060198" data-position="top" data-delay="50"><i class="fab fa-qq"></i></a><a href="https://cdn.jsdelivr.net/gh/nanzet/nanzet-imgs/images/f3d68e8f8de09049ca5bd45ae2c119f.jpg" class="tooltipped" target="_blank" data-tooltip="微信联系我: https://cdn.jsdelivr.net/gh/nanzet/nanzet-imgs/images/f3d68e8f8de09049ca5bd45ae2c119f.jpg" data-position="top" data-delay="50"><i class="fab fa-weixin"></i></a><a href="/atom.xml" class="tooltipped" target="_blank" data-tooltip="RSS 订阅" data-position="top" data-delay="50"><i class="fas fa-rss"></i></a></div></div></footer><div class="progress-bar"></div><div id="searchModal" class="modal"><div class="modal-content"><div class="search-header"><span class="title"><i class="fas fa-search"></i> &nbsp;&nbsp;搜索</span> <input type="search" id="searchInput" name="s" placeholder="请输入搜索的关键字" class="search-input"></div><div id="searchResult"></div></div></div><script src="https://cdn.jsdelivr.net/gh/Nanzet/nanzet.github.io/js/search.js"></script><script>$(function(){searchFunc("https://cdn.jsdelivr.net/gh/Nanzet/nanzet.github.io/search.xml","searchInput","searchResult")})</script><div id="backTop" class="top-scroll"><a class="btn-floating btn-large waves-effect waves-light" href="#!"><i class="fas fa-arrow-up"></i></a></div><script src="https://cdn.jsdelivr.net/gh/Nanzet/nanzet.github.io/libs/materialize/materialize.min.js"></script><script src="https://cdn.jsdelivr.net/gh/Nanzet/nanzet.github.io/libs/masonry/masonry.pkgd.min.js"></script><script src="https://cdn.jsdelivr.net/gh/Nanzet/nanzet.github.io/libs/aos/aos.js"></script><script src="https://cdn.jsdelivr.net/gh/Nanzet/nanzet.github.io/libs/scrollprogress/scrollProgress.min.js"></script><script src="https://cdn.jsdelivr.net/gh/Nanzet/nanzet.github.io/libs/lightGallery/js/lightgallery-all.min.js"></script><script src="https://cdn.jsdelivr.net/gh/Nanzet/nanzet.github.io/js/matery.js"></script><script>!function(){var t=document.createElement("script"),e=window.location.protocol.split(":")[0];t.src="https"===e?"https://zz.bdstatic.com/linksubmit/push.js":"http://push.zhanzhang.baidu.com/push.js";var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(t,s)}()</script><script src="https://cdn.jsdelivr.net/gh/Nanzet/nanzet.github.io/libs/others/clicklove.js" async></script><script async src="https://cdn.jsdelivr.net/gh/Nanzet/nanzet.github.io/libs/others/busuanzi.pure.mini.js"></script><script src="https://cdn.jsdelivr.net/gh/Nanzet/nanzet.github.io/libs/background/ribbon-dynamic.js" async></script><script src="https://cdn.jsdelivr.net/gh/Nanzet/nanzet.github.io/libs/instantpage/instantpage.js" type="module"></script><script src="//cdn.jsdelivr.net/npm/js-base64/base64.min.js"></script><script>$('a').each(function() {
          const $this = $(this);
          const href = $this.attr('href');
          if (href && href.match('^((http|https|thunder|qqdl|ed2k|Flashget|qbrowser|ftp|rtsp|mms)://)')) {
            const strs = href.split('/');
            if (strs.length >= 3) {
                const host = strs[2];
                if (host !== 'null' || window.location.host) {
                    $this.attr('href', '/go.html?u='+Base64.encode(href)+'').attr('rel', 'external nofollow noopener noreferrer');
                    if (true) {
                        $this.attr('target', '_blank');
                    }
                }
            }
          }
        });</script></body></html>